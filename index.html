

<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
  <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
    <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
      <!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
        <head>
          <meta charset="utf-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge">
          <meta name="description" content="World">
          <meta name="author" content="4gn3s">
          <title>CAD/CAM development BLOG</title>
          <meta name="HandheldFriendly" content="True">
          <meta name="MobileOptimized" content="320">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">

          <!-- For all browsers -->
          <link rel="stylesheet" href="assets/css/main.min.css">
          <!-- Webfonts -->
          <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

          <meta http-equiv="cleartype" content="on">

          <!-- Load Modernizr -->
          <script src="assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

          <!-- Icons -->
          <!-- 16x16 -->
          <link rel="shortcut icon" href="assets/favicon.ico">
          <!-- 32x32 -->
          <link rel="shortcut icon" href="assets/favicon.png">

        </head>

        <body id="post-index" class="feature">
          <div class="entry-header">
            <div class="entry-image">
              <img src="assets/images/abstract-4.jpg" alt="CAD/CAM development BLOG">
            </div><!-- /.entry-image -->
            <div class="header-title">
              <div class="header-title-wrap">
                <h1>CAD/CAM development BLOG</h1>
                <h2>Master thesis work</h2>
              </div><!-- /.header-title-wrap -->
            </div><!-- /.header-title -->
          </div><!-- /.entry-header -->

          <div id="main" role="main">
            

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Tue Sep  2 10:34:27 2014">
                    <a href="http://4gn3s.github.io/MDer/">Tue Sep  2 10:34:27 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Days 9, 10, 11</h1>
            

<h3>Usage of <strong>QVTKwidget</strong> for PCL visualization instead of writing a <em>GLWidget</em> class with VBOs. Problems:</h3>

<ul>
<li>Was using Qt5, but QVTK widget depends on Qt4 -> solution: <em>downgrade the entire project</em></li>
<li>problems with <strong>"QWidget: Must construct a QApplication before a QPaintDevice"</strong> solved as mentioned <a href="http://www.vtk.org/Wiki/VTK/FAQ#Shared_builds_of_VTK_and_debugging_QVTKWidget_using_Visual_Studio">here</a>
<ul>
<li>removed VTK, Qt from the PATH</li>
<li>added VTK in Environment section in VS</li>
<li>VTK INSTALL is missing /debug files, so copied them manually from build folder to newly created /debug under /bin and /lib in VTK_DIR, also chaged paths in VS (added /debug)</li>
</ul></li>
<li>QT visualizer added as described <a href="http://pointclouds.org/documentation/tutorials/qt_visualizer.php#qt-visualizer">here</a></li>
</ul>

<h2>some TODOs</h2>

<ul>
<li>add system variables for PCL, VTK, Eigen etc. and change paths in VS under <em>additional include dirs</em> and <em>linker->input</em></li>
<li>check if point cloud visualization actually works</li>
<li><strong>Matcher.cpp</strong> is a mess- reorganize the whole class, implement interfaces, etc.</li>
<li>add Optical Flow based matcher for camera tests later</li>
<li>Start SFM:
<ul>
<li>camera matrices</li>
<li>triangulation</li>
<li>add many views: <em>solvePnp</em></li>
<li>Bundle Adjustment (later from OpenMVG or mine)</li>
<li>results to point cloud</li>
<li>filter out the cloud</li>
<li>create surface, normals etc.</li>
</ul></li>
</ul>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Thu Aug 14 16:47:46 2014">
                    <a href="http://4gn3s.github.io/MDer/">Thu Aug 14 16:47:46 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Days 7-8</h1>
            

<p>Created the project in VS2012. Linked Qt 5.3 x64 with OpenGL and OpenCV.</p>

<h3>Work completed:</h3>

<ul>
<li>Some GUI</li>
<li>Loading a series of images from a directory</li>
<li><p>Matching class structure:</p>

<ul>
<li><em>ImageInfo</em> class, that contains a single image with its keypoints,
desriptors etc.</li>
<li><p><em>Matcher</em> class, that performs feature detection and matching and
creates debug images.</p>

<p><strong>Maybe change FlannBasedMatcher for BruteForce later. Also Add SIFT.
Work on tests that filter out some of the connections.</strong></p></li>
</ul></li>
</ul>

<h3>TODO NEXT:</h3>

<ul>
<li>Output matching results to file</li>
<li>View debug matching results in one of the tabs</li>
<li>CREATE POINT CLOUD</li>
</ul>

<p><img src="assets/images/day78.png" alt="screen" /></p>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Sun Apr  6 09:48:32 2014">
                    <a href="http://4gn3s.github.io/MDer/">Sun Apr  6 09:48:32 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Day 6</h1>
            

<h3>Image sequence generator</h3>

<p>Generating images of a cube given its:</p>

<ul>
<li>size</li>
<li>rotation angle</li>
<li>rotation axis</li>
</ul>

<p>toggling menu - <em>left mouse button</em></p>

<h3>Class structure for <em>matching</em></h3>

<p><strong>input:</strong> series of images</p>

<p><strong>output:</strong> </p>

<ul>
<li>matched points saved to a text file</li>
<li>image pairs viewed/ saved with matches drawn</li>
</ul>

<p><strong><em>out data format:</em></strong></p>

<div class="codehilite"><pre><code>    <span class="c"># pair 1</span>
<span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span>
<span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span>
<span class="o">...</span>
<span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span>
    <span class="c"># empty line</span>
    <span class="c"># pair 2</span>
<span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span>
<span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span>
<span class="o">..</span>
<span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span>
    <span class="c"># and so on</span>
</code></pre></div>

<p>Decide on which detector to use:</p>

<ul>
<li>SIFT
<ul>
<li>slow</li>
<li>nice results</li>
</ul></li>
<li>SURF
<ul>
<li>fast</li>
<li>crappy</li>
</ul></li>
</ul>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Sun Apr  6 09:48:32 2014">
                    <a href="http://4gn3s.github.io/MDer/">Sun Apr  6 09:48:32 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Day 5</h1>
            

<h3>Rebuilding Qt, VTK &amp; PCL due to nasty Qt and VTK paths</h3>

<p>also installed new Python 3.4 with:</p>

<ul>
<li>pygame</li>
<li>numpy</li>
<li>scipy</li>
<li>matplotlib</li>
<li>ipython</li>
</ul>

<h4>Build times:</h4>

<ul>
<li>QT 4.8: approx. 3h</li>
<li>VTK 5.1: debug 00:38:32.05 + release 00:37:14.57</li>
<li>PCL 1.7: debug 01:08:52.98 + release 01:33:23.84</li>
</ul>

<h2>...AND IT WORKS!</h2>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Sun Apr  6 09:48:32 2014">
                    <a href="http://4gn3s.github.io/MDer/">Sun Apr  6 09:48:32 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Day 4 PCL build</h1>
            

<p>building without an app called: cloud composer</p>

<h2>FINALLY!!</h2>

<p>Release:</p>

<pre><code>========== Build: 148 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========
</code></pre>

<p>Time Elapsed <em>01:33:18.95</em></p>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Sun Apr  6 09:48:32 2014">
                    <a href="http://4gn3s.github.io/MDer/">Sun Apr  6 09:48:32 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Day 3</h1>
            

<p>VTK 5 doesn't support Qt 5, so I have to build Qt 4.8 from sources (no x64 binaries are provided), following [that answer on SO]</p>

<h4>This is starting to get silly</h4>

<p>next building VTK 5 in debug (time: <em>00:44:56.22</em>) &amp; release (time: <em>00:37:25.25</em>) and I'm like
<img src="http://i.imgur.com/Yf0tR4v.gif" alt="waiting" title="Waiting..." /></p>

<p>OK, and so we go to PCL.
While opening the project in VS it loads for about 10 minutes or so, that's why: 
<img src="http://i.imgur.com/BTW1lcA.png" alt="long loading" title="Long loading PCL solution" /></p>

<p>Problems:</p>

<ol>
<li>CMake Eigen path incorrect</li>
<li>CMake flann path pointing to x86 flann</li>
<li><em>serialization.h</em> x64 bug in PCL again (probably will be solved by linking the correct version of flann)</li>
</ol>

<p>Can't build some apps because of QVTK missing,
seems that to have QVTK you not only need to build VTK with Qt, but also set following variables to true:</p>

<pre><code>VTK_USE_QT 
VTK_USE_GUISUPPORT
BUILD_SHARED_LIBS
</code></pre>

<h3>Great, so we're building VTK yet <em>again</em></h3>

<ul>
<li>debug: <em>03:57:27.99</em> ok just kidding, went to lunch in the meantime</li>
<li>release: <em>00:39:18.70</em></li>
</ul>

<h2>Building PCL:</h2>

<ul>
<li>debug <em>01:12:06.28</em></li>
</ul>

<p><img src="http://i.imgur.com/NuTqavy.png" alt="errors debug" title="Errors in debug build" /></p>

<ul>
<li>release <em>much longer</em></li>
</ul>

<p><img src="http://i.imgur.com/WsPvSIl.png" alt="errors release" title="Errors in release build" /></p>

<p>All the errors are of PCL_CC_<em>SOMETHING</em>, hopefully I'm not gonna need that. (<strong>CloudCompare?</strong> - of so, not suprising, I haven't installed that)</p>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Sun Apr  6 09:48:32 2014">
                    <a href="http://4gn3s.github.io/MDer/">Sun Apr  6 09:48:32 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Day 2</h1>
            

<p>trying to solve problems with <strong>flann</strong>:</p>

<ul>
<li>cmake using x32 generator (why? in x64 I keep getting <em>left of '.serialize' must have class/struct/union</em>);</li>
<li>disabled python and matlab bindings;</li>
<li>in VS unbinded all projects with pyunit in name;</li>
<li>to build INSTALL in release run VS as administrator, otherwise errors</li>
</ul>

<p>update: managed to build x64 flann by adding:</p>

<pre><code>#ifdef _MSC_VER
BASIC_TYPE_SERIALIZER(unsigned __int64);
#endif
</code></pre>

<p>to <em>serialize.h</em>, as described in <a href="https://github.com/mariusmuja/flann/issues/82">here</a></p>

<h2>CMake-ing PCL (version: pull request with OpenNI2 support):</h2>

<ol>
<li>error: <em>Unable to find the requested Boost libraries.</em>
WTF?? Installed using binaries provided and it can't find it?!
-> fixed by setting env. variable <code>BOOST_LIBRARYDIR</code></li>
<li>error: <em>Could NOT find Eigen (missing: EIGEN_INCLUDE_DIR)</em>
-> set <code>EIGEN_INCLUDE_DIR</code></li>
<li>build Qhull from sources &amp; set <code>QHULL_INCLUDE_DIR</code>, <code>QHULL_LIBRARY</code></li>
<li>error: <em>CMake Error at C:/Qt/qt-5.1.1-x86-msvc2012-opengl/qt-5.1.1-x86-msvc2012-opengl/lib/cmake/Qt5Gui/Qt5GuiConfigExtras.cmake:16 (message): Failed to find "glu32" in "".</em>
-> added <code>CMAKE_PREFIX_PATH</code> = â€śC:\Program Files (x86)\Windows Kits\8.0\Lib\win8\um\x64â€ť)'</li>
<li>still <em>VTK not found.</em>. But for the first time <strong>no ERRORS!</strong>
no option other than to build VTK myself; it can'e be that easy: VTK doesn't work with QT5
-> solved by changing <code>VTK_QT_VERSION</code> cmake option from 4 to 5. (â€śAdvancedâ€ť to show this option)
OH GREAT, but I have Qt x32, and VTK wants x64->downloading binary <code>qt-opensource-windows-x86-msvc2012_64_opengl-5.2.1</code>
and changing <code>QT_DIR</code> after install</li>
</ol>

<h2>Building PCL</h2>

<p>176 errors, canceled build after ~45 mins.</p>

<p>OK, it seems that PCL doesn't support VTK v.6 :(
So again I will have to download the sources and build VTK...</p>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Sun Apr  6 09:48:32 2014">
                    <a href="http://4gn3s.github.io/MDer/">Sun Apr  6 09:48:32 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Day 1</h1>
            

<h2>an attempt to build PLC on Windows 7 with Vs2012</h2>

<p>starting <a href="http\://cs.unc.edu/~kwaegel/pcl/pcl_build_notes.html">here</a> and <a href="http\://pointclouds.org/documentation/tutorials/compiling_pcl_windows.php#compiling-pcl-windows">here</a></p>

<h5>list of dependencies:</h5>

<ul>
<li><strong>cmake</strong> 2.8.11.2 already installed</li>
<li><strong>boost</strong> 1.55.0 downloading binary from <a href="http\://sourceforge.net/projects/boost/files/boost-binaries/1.55.0-build2/boost_1_55_0-msvc-11.0-64.exe/download">here</a>; installed in <em>C:\local\boost_1_55_0</em>
<ul>
<li>to link in vs use <a href="C\:/local/boost_1_55_0/more/getting_started/windows.html">this</a></li>
</ul></li>
<li><strong>qhull</strong> extracted to <em>C:\local\qhull-2012.1</em>, binaries already provided</li>
<li><strong>eigen</strong> extracted to <em>C:\local\eigen</em>, no need to build</li>
<li><strong>flann</strong></li>
<li><strong>Qt</strong> 5.1.1. with opnegl alfready here</li>
<li><strong>VTK</strong> 6.1.0 x64 binary downloaded from <a href="http://www.vtk.org/VTK/resources/software.html">here</a>
installing in <em>C:\Program Files\VTK 6.1.0</em></li>
<li><strong>OpenNI2</strong> already installed</li>
</ul>

<p>Overall result: unsuccessful; flann build causes errors (in syntax?!)</p>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->

    <article class="hentry">
        <header>
            <div class="entry-meta">
                <span class="entry-date date published updated">
                    <time datetime="Sun Apr  6 09:48:32 2014">
                    <a href="http://4gn3s.github.io/MDer/">Sun Apr  6 09:48:32 2014</a>
                    </time>
                </span>
                <span class="author vcard">
                    <span class="fn">
                        <a href="http://4gn3s.github.io/MDer/about.html" title="About 4gn3s">4gn3s</a>
                    </span>
                </span>
            </div><!-- /.entry-meta -->
        </header>
        <div class="entry-content">
            <h1 id="title">Day 0</h1>
            

<h2>Project title: <strong>The estimation of 3D geometry of objects from multiple view images</strong></h2>

<h4>Warsaw University of Technology, Computer Science</h4>

<p>I'm going to make notes here about my progess including configuration, algorithms, implementation details etc.</p>

<p>Also collect useful links, papers, source code.</p>

        </div><!-- /.entry-content -->
    </article><!-- /.hentry -->


          </div><!-- /#main -->

          <div class="footer-wrapper">
            <span> Based on <b><a href="https://github.com/mmistakes/hpstr-jekyll-theme">Jekyll
                  HPSTR theme</a></b> by 4gn3s, <i>2014</i></span>
          </div><!-- /.footer-wrapper -->



          <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
          <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
            <script src="assets/js/scripts.min.js"></script>
          </body>
        </html>